<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>TextMenu.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">laba3</a> &gt; <a href="index.source.html" class="el_package">ua.lpnu.students.labs.laba2.ChristmassDecoration.TextMenu</a> &gt; <span class="el_source">TextMenu.java</span></div><h1>TextMenu.java</h1><pre class="source lang-java linenums">package ua.lpnu.students.labs.laba2.ChristmassDecoration.TextMenu;

import java.util.List;

import ua.lpnu.students.labs.laba2.ChristmassDecoration.Manager.Manager;
import ua.lpnu.students.labs.laba2.ChristmassDecoration.Manager.utils.FieldDescription;
import ua.lpnu.students.labs.laba2.ChristmassDecoration.Model.shared.Template;
import ua.lpnu.students.labs.laba2.ChristmassDecoration.Model.shared.Type;

public class TextMenu {
    Manager manager;

<span class="pc" id="L13">    ConsoleComunicator console = new ConsoleComunicator();</span>

    // Constructor
<span class="nc" id="L16">    public TextMenu() {</span>
<span class="nc" id="L17">        manager = new Manager();</span>
<span class="nc" id="L18">    }</span>

<span class="fc" id="L20">    public TextMenu(List&lt;Template&gt; decorations) {</span>
<span class="fc" id="L21">        manager = new Manager(decorations);</span>
<span class="fc" id="L22">    }</span>

    // Functions
    // Provide menu
    public void mainMenu() {
<span class="nc" id="L27">        boolean always = true;</span>
<span class="nc bnc" id="L28" title="All 2 branches missed.">        while (always) {</span>
<span class="nc" id="L29">            console.print(MAIN_MENU_STR);</span>
<span class="nc bnc" id="L30" title="All 7 branches missed.">            switch (console.scanString()) {</span>
                case &quot;a&quot;:
<span class="nc" id="L32">                    addDecoration();</span>
<span class="nc" id="L33">                    break;</span>
                case &quot;l&quot;:
<span class="nc" id="L35">                    console.print(listDecorationIndexed());</span>
<span class="nc" id="L36">                    break;</span>
                case &quot;d&quot;:
<span class="nc" id="L38">                    deleteDecoration();</span>
<span class="nc" id="L39">                    break;</span>
                case &quot;e&quot;:
<span class="nc" id="L41">                    editDecoration();</span>
<span class="nc" id="L42">                    break;</span>
                case &quot;f&quot;:
<span class="nc" id="L44">                    filterDecorations();</span>
<span class="nc" id="L45">                    break;</span>
                case &quot;x&quot;:
<span class="nc" id="L47">                    always = false;</span>
<span class="nc" id="L48">                    break;</span>
                default:
<span class="nc" id="L50">                    console.print(INVALID_STRING);</span>
<span class="nc" id="L51">            }</span>
        }
<span class="nc" id="L53">    }</span>

    // Menu options
    void filterDecorations() {
<span class="nc" id="L57">        List&lt;FieldDescription&gt; filters = manager.getFilters();</span>
<span class="nc" id="L58">        filters.forEach((field) -&gt; {</span>
<span class="nc" id="L59">            Object tmp = (Object) console.set(</span>
<span class="nc" id="L60">                    field.getValue(),</span>
<span class="nc" id="L61">                    field.getMessage());</span>
<span class="nc" id="L62">            field.setValue(tmp);</span>
<span class="nc" id="L63">        });</span>

<span class="nc" id="L65">        manager.setFilters(filters);</span>

<span class="nc" id="L67">        List&lt;Template&gt; filtered = manager.filter();</span>

<span class="nc" id="L69">        String[] sorting = manager.getSortings();</span>

<span class="nc" id="L71">        String out = new String();</span>
<span class="nc" id="L72">        int count = 0;</span>
<span class="nc bnc" id="L73" title="All 2 branches missed.">        for (String i : sorting) {</span>
<span class="nc" id="L74">            out += String.format(&quot;%d. %s \n&quot;, count++, i);</span>
        }
<span class="nc" id="L76">        console.print(out);</span>
<span class="nc" id="L77">        int option = console.scanStrictlyInt(sorting.length - 1);</span>
<span class="nc" id="L78">        boolean descending = (Boolean) console.set(false, DESCENDING_STRING);</span>

<span class="nc" id="L80">        manager.setSorting(sorting[option], descending);</span>

<span class="nc" id="L82">        filtered.forEach((decoration) -&gt; {</span>
<span class="nc" id="L83">            console.print(String.format(&quot;%s\n&quot;, decoration.toString()));</span>
<span class="nc" id="L84">        });</span>

<span class="nc" id="L86">    }</span>

    public void addDecoration() {
<span class="fc" id="L89">        console.print(CHOOSE_TYPE_STR);</span>

<span class="fc" id="L91">        Type type = (Type) console.set(Type.ELECTRIC_DECORATION, &quot;&quot;);</span>
<span class="fc" id="L92">        List&lt;FieldDescription&gt; fields = manager.getFieldsOf(type);</span>
<span class="fc" id="L93">        fields.forEach((field) -&gt; {</span>
<span class="fc" id="L94">            Object a = (Object) console.set(field.getValue().getClass().cast(field.getValue()),</span>
<span class="fc" id="L95">                    field.getMessage());</span>
<span class="fc" id="L96">            field.setValue(a);</span>
<span class="fc" id="L97">        });</span>
<span class="fc" id="L98">        manager.addDecoration(type, fields);</span>
<span class="fc" id="L99">    }</span>

    String listDecorationIndexed() {
<span class="fc" id="L102">        String out = String.format(LIST_OPTION_STR, manager.getDecorations().size());</span>
<span class="fc" id="L103">        out.formatted(manager.getDecorations().size());</span>
<span class="fc" id="L104">        int count = 0;</span>
<span class="fc bfc" id="L105" title="All 2 branches covered.">        for (Template i : manager.getDecorations()) {</span>
<span class="fc" id="L106">            out += count + LINE_NUMBER_DIVADER_STR + i.toString() + &quot;\n&quot;;</span>
<span class="fc" id="L107">            count++;</span>
<span class="fc" id="L108">        }</span>
<span class="fc" id="L109">        return out;</span>
    }

    public void editDecoration() {
<span class="fc" id="L113">        console.print(listDecorationIndexed());</span>
<span class="fc" id="L114">        console.print(EDITING_OPTION_STR);</span>
        int position;
        do {
<span class="fc" id="L117">            position = (Integer) console.set(4, CHOOSE_NUMBER_STR);</span>
<span class="pc bpc" id="L118" title="1 of 2 branches missed.">        } while (position &gt;= manager.getDecorations().size());</span>

<span class="fc" id="L120">        List&lt;FieldDescription&gt; fields = manager.getFieldsOf(position);</span>
<span class="fc" id="L121">        fields.forEach((field) -&gt; {</span>
<span class="fc" id="L122">            Object a = console.edit(field.getValue(), field.getMessage());</span>
<span class="fc" id="L123">            field.setValue(a);</span>
<span class="fc" id="L124">        });</span>
<span class="fc" id="L125">        manager.setDecoration(position, fields);</span>
<span class="fc" id="L126">    }</span>

    public void deleteDecoration() {
<span class="fc" id="L129">        console.print(listDecorationIndexed());</span>
<span class="fc" id="L130">        console.print(DELETING_OPTION_STR);</span>
        int position;
        do {
<span class="fc" id="L133">            position = (Integer) console.set(4, CHOOSE_NUMBER_STR);</span>
<span class="pc bpc" id="L134" title="1 of 2 branches missed.">        } while (position &gt;= manager.getDecorations().size());</span>
<span class="fc" id="L135">        manager.deleteDecoration(position);</span>
<span class="fc" id="L136">    }</span>
    // Menu options

    // String literals
    private static final String DELETING_OPTION_STR = &quot;Delete decoration:&quot;;
    private static final String LIST_OPTION_STR = &quot;There are %d decoration(s):\n&quot;;
    private static final String LINE_NUMBER_DIVADER_STR = &quot;. &quot;;
    private static final String CHOOSE_NUMBER_STR = &quot;Enter number of the decoration: &quot;;
    private static final String EDITING_OPTION_STR = &quot;Edit decoration\n&quot;;
    private static final String CHOOSE_TYPE_STR = &quot;Adding new decoration\nChoose the type of the decoration:\n&quot;;
    private static final String MAIN_MENU_STR = &quot;&quot;&quot;
            Choose option:
            a - add decoration
            l - list decorations
            d - delete decoration
            e - edit decoration
            f - filter decorations
            x - exit
            &gt;&gt;&gt;&quot;&quot;&quot;;

    private static final String INVALID_STRING = &quot;Invalid input\nTry again!!\n&quot;;
    private static final String DESCENDING_STRING = &quot;Descending?\n&quot;;
    // String literals
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>